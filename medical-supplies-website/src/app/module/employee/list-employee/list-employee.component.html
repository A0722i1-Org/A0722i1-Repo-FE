<section>
  <div class="container">
    <form #searchForm="ngForm" (ngSubmit)="search(searchForm.value.nameEmployee,searchForm.value.dateofbirth,searchForm.value.pos)" class="form__filter d-flex">
      <div class="search-container">
        <input name="nameEmployee" [(ngModel)]="employeeNameSearch" [value]=""  type="text" placeholder="Tên Nhân Viên">
        <input [(ngModel)]="dateOfBirth" name="dateofbirth" type="date" placeholder="Ngày sinh">
        <select  [(ngModel)]="posName" name="pos" class="position">
          <option selected value="">
            Chọn chức vụ
          </option>
          <option *ngFor="let pos of positions" [value]="pos.positionName">{{pos.positionName}}</option>
        </select>
        <button style="margin: 0px 4px" type="submit"><i class="fa fa-search"></i></button>
      </div>
      <div class="btn-create">
      <a routerLink="/create" >
        <i class="fa-solid fa-plus"></i>
        Thêm mới
      </a>
      </div>
    </form>
    <div class="error" *ngIf="employees.length==0">Danh sách rỗng !!!</div>
    <div class="row g-4 py-5">
      <div class="col-md-3" *ngFor="let employee of employees">
        <div class="product-single-card">
          <div class="product-top-area">
            <div class="product-discount" *ngIf="employee.gender==true" >
              Nữ
            </div>
            <div class="product-discount" *ngIf="employee.gender==false" >
              Nam
            </div>
            <div class="product-img">
              <div class="first-view">
                <img [src]="employee?.employeeImg" alt="logo"
                     class="img-fluid" >
              </div>
              <div class="hover-view">
                <img [src]="employee?.employeeImg" alt="logo"
                     class="img-fluid" >
              </div>
            </div>
            <div class="sideicons">
              <button class="sideicons-btn" (click)="delete(employee.employeeId,employee.employeeName)">
                <i class="fa-solid fa-trash"></i>
              </button>
              <button id="open-modal-button" (click)="getEmployee(employee.employeeId)" class="sideicons-btn">
                <i class="fa-solid fa-eye"></i>
              </button>
              <button class="sideicons-btn" [routerLink]="['update',employee.employeeId]">
                <i class="fa-solid fa-pen"></i>
              </button>
            </div>
          </div>
          <div class="product-info">
            <h6 class="product-category">{{employee.employeeCode}}</h6>
            <h6 class="product-title text-truncate">{{employee.employeeName}}</h6>
            <div class="d-flex align-items-center">
              <div class="review-star me-1">
              </div>
              <div style="margin-bottom: -20px;margin-left: -5px;">
                <p class="review-count">{{employee.dateOfBirth|date: 'dd/MM/yyyy'}}</p>
              </div>
            </div>
            <div class="d-flex flex-wrap align-items-center py-2">
              <div class="new-price">
                {{employee.position.positionName}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div id="modal" [ngClass]="{'modal': true, 'open': isModalOpen}" class="modal">
  <div style="justify-content: center; margin-top: 10%;" class="modal-content">
    <span id="close-modal-button"  (click)="closeEmployeeModal()" class="close">Thoát</span>
    <div class="object-details">
      <img style="width: 100px;height:150px ;margin-left: 30px;"
           [src]="employee?.employeeImg" alt="logo"
           class="img-fluid">
      <div class="object-info" style="margin:0px 100px;">
        <h4 class="object-name">{{employee?.employeeCode}}</h4>
        <p class="object-description">Tên nhân viên: {{employee?.employeeName}}</p>
        <p *ngIf="employee?.gender==true" class="object-address">Giới tính: Nữ </p>
        <p *ngIf="employee?.gender==false" class="object-address">Giới tính: Nam </p>
        <p class="object-address">Ngày sinh: {{employee?.dateOfBirth|date:'dd/MM/yyyy'}}</p>
        <p class="object-address">Lương: {{employee?.salary|currency}}</p>
        <p class="object-address">Tên tài khoản: {{employee?.account.username}}</p>
        <p class="object-address">Quê quán: {{employee?.employeeAddress}}</p>
        <p class="object-address">Số điện thoại: {{employee?.phone}}</p>
        <p class="object-address">CMND: {{employee?.idCard}}</p>
        <p class="object-address">Email: {{employee?.email}}</p>
        <p class="object-address">Chức vụ: {{employee?.position.positionName}}</p>
      </div>
    </div>
  </div>
</div>
